
---

# ๐น **ุชุฎุตุต ุญุงูุธู ูพูุง (Dynamic Memory Allocation) ุฏุฑ C โ ุชูุถุญุงุช ฺฉุงูู**

---

## ๐ง 1. ุญุงูุธู ูพูุง ฺุณุชุ

* **ุชุฎุตุต ุญุงูุธู ูพูุง** ุนู ุญุงูุธูโุง ฺฉู **ุฏุฑ ุฒูุงู ุงุฌุฑุง (runtime)** ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏุ ูู ุฏุฑ ุฒูุงู **ฺฉุงููพุงู**.
* ุงู ุงูฺฉุงู ุฑุง ุจู ุจุฑูุงูู ูโุฏูุฏ ฺฉู **ุจู ุงูุฏุงุฒู ูุงุฒ ุญุงูุธู ุงุฎุชุตุงุต ุฏูุฏ ู ุจุนุฏ ุงุฒ ุงุณุชูุงุฏู ุขุฒุงุฏ ฺฉูุฏ**.

**ุญุงูุธู ุงุณุชุงุชฺฉ:** ุงูุฏุงุฒู ุซุงุจุชุ ุฏุฑ ุฒูุงู ฺฉุงููพุงู ุชุฎุตุต ุฏุงุฏู ูโุดูุฏ (ูุซูุงู: `int arr[10];`)
**ุญุงูุธู ูพูุง:** ุงูุฏุงุฒู ุฏุฑ ุฒูุงู ุงุฌุฑุง ูุดุฎุต ูโุดูุฏ ู ุจุง **ุงุดุงุฑูโฺฏุฑูุง ู heap** ูุฏุฑุช ูโุดูุฏ.

---

## ๐น 2. ฺุฑุง ุงุฒ ุญุงูุธู ูพูุง ุงุณุชูุงุฏู ูโฺฉููุ

1. ููุช **ุงูุฏุงุฒู ุฏุงุฏู ุฏุฑ ุฒูุงู ฺฉุงููพุงู ูุดุฎุต ูุณุช**.
2. ุจุฑุง **ุตุฑููโุฌู ุฏุฑ ุญุงูุธู** ู ุงุฎุชุตุงุต ุชููุง ุงูุฏุงุฒู ููุฑุฏ ูุงุฒ.
3. ุจุฑุง **ุงุฌุงุฏ ุณุงุฎุชุงุฑูุง ุฏุงุฏู ูพูุง** ูุซู Linked Listุ ุฏุฑุฎุชุ ฺฏุฑุงู.
4. ุจุฑุง **ุจุงุฒฺฏุฑุฏุงูุฏู ุญุงูุธู ุงุฒ ฺฉ ุชุงุจุน**.
5. ุจุฑุง **ุชุบุฑ ุงูุฏุงุฒู ุญุงูุธู ุฏุฑ ุฒูุงู ุงุฌุฑุง** ุจุง `realloc`.

---

## ๐น 3. ฺุฏูุงู ุญุงูุธู ุฏุฑ C

ุญุงูุธู ุจุฑูุงูู C ุจู ฺูุฏ ุจุฎุด ุชูุณู ูโุดูุฏ:

| ุจุฎุด ุญุงูุธู         | ฺฉุงุฑุจุฑุฏ                                                    |
| ----------------- | --------------------------------------------------------- |
| Stack             | ูุชุบุฑูุง ูุญู ู ูุฑุงุฎูุงู ุชูุงุจุน (ุญุงูุธู ุฎูุฏฺฉุงุฑุ ุณุฑุนุ ูููุช) |
| Heap              | ุญุงูุธู ูพูุง (ุจุง malloc/calloc/free ูุฏุฑุช ูโุดูุฏ)          |
| Data Segment      | ูุชุบุฑูุง ุณุฑุงุณุฑ ู ุงุณุชุงุชฺฉ                                 |
| Code/Text Segment | ุฏุณุชูุฑูุง ุจุฑูุงูู                                           |

> ุญุงูุธู ูพูุง ุฏุฑ **heap** ุจุง ุงุณุชูุงุฏู ุงุฒ **ุงุดุงุฑูโฺฏุฑูุง** ูุฏุฑุช ูโุดูุฏ.

---

## ๐น 4. ุชูุงุจุน ุชุฎุตุต ุญุงูุธู ูพูุง (`stdlib.h`)

C ฺูุงุฑ ุชุงุจุน ุงุตู ุจุฑุง ูุฏุฑุช ุญุงูุธู ูพูุง ุฏุงุฑุฏ:

| ุชุงุจุน    | ฺฉุงุฑุจุฑุฏ                                     |
| ------- | ------------------------------------------ |
| malloc  | ุชุฎุตุต ุญุงูุธู (ููุฏุงุฑุฏู ูุดุฏู)                |
| calloc  | ุชุฎุตุต ุญุงูุธู ุจุฑุง n ุนูุตุฑ ู ููุฏุงุฑุฏู 0       |
| realloc | ุชุบุฑ ุงูุฏุงุฒู ุญุงูุธู ุงุฎุชุตุงุต ุฏุงุฏู ุดุฏู         |
| free    | ุขุฒุงุฏุณุงุฒ ุญุงูุธู ุจุฑุง ุฌููฺฏุฑ ุงุฒ Memory Leak |

---

## ๐น 5. malloc (Memory Allocation)

* **ุณูุชฺฉุณ:**

```c
ptr = (type*) malloc(size_in_bytes);
```

* ุญุงูุธู **ูพูุณุชู ุฏุฑ heap** ุงุฎุชุตุงุต ูโุฏูุฏ.
* ุญุงูุธู **ููุฏุงุฑุฏู ูุดุฏู** ุงุณุช โ ุดุงูู ููุงุฏุฑ ุชุตุงุฏู.
* ุงฺฏุฑ ุชุฎุตุต ูููู ูุจูุฏุ **NULL** ุจุฑูโฺฏุฑุฏุงูุฏ.

### ูุซุงู:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *ptr = (int*) malloc(5 * sizeof(int)); // ุขุฑุงู 5 ุนุถู

    if(ptr == NULL) {
        printf("ุชุฎุตุต ุญุงูุธู ููููุชโุขูุฒ ูุจูุฏ.\n");
        return 1;
    }

    for(int i=0;i<5;i++)
        ptr[i] = i+1;

    for(int i=0;i<5;i++)
        printf("%d ", ptr[i]);

    free(ptr); // ุขุฒุงุฏุณุงุฒ ุญุงูุธู
    ptr = NULL; // ุฌููฺฏุฑ ุงุฒ dangling pointer
    return 0;
}
```

**ุฎุฑูุฌ:**

```
1 2 3 4 5
```

**ูููุฏุงุฑ ุญุงูุธู:**

```
Heap:
0x500: 1 2 3 4 5
Stack:
ptr -> 0x500
```

---

## ๐น 6. calloc (Contiguous Allocation)

* ุญุงูุธู ุจุฑุง **n ุนูุตุฑ ุจุง ุงูุฏุงุฒู ูุดุฎุต** ุงุฎุชุตุงุต ูโุฏูุฏ.
* ููู ุญุงูุธู **ุจุง ููุฏุงุฑ 0 ููุฏุงุฑุฏู ูโุดูุฏ**.
* ุณูุชฺฉุณ:

```c
ptr = (type*) calloc(n, sizeof(type));
```

### ูุซุงู:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *ptr = (int*) calloc(5, sizeof(int));

    for(int i=0;i<5;i++)
        printf("%d ", ptr[i]); // ุฎุฑูุฌ: 0 0 0 0 0

    free(ptr);
    return 0;
}
```

---

## ๐น 7. realloc (ุจุงุฒุชุฎุตุต)

* ุจุฑุง **ุชุบุฑ ุงูุฏุงุฒู ุญุงูุธู ูุจูุงู ุงุฎุชุตุงุต ุฏุงุฏู ุดุฏู** ุงุณุชูุงุฏู ูโุดูุฏ.
* ูโุชูุงู ุงูุฏุงุฒู ุฑุง **ฺฉู ุง ุฒุงุฏ** ฺฉุฑุฏ.
* ุฏุงุฏูโูุง ููุฌูุฏ **ุชุง ุงูุฏุงุฒู ุฌุฏุฏ ุญูุธ ูโุดููุฏ**.

### ูุซุงู:

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *ptr = (int*) malloc(3 * sizeof(int));
    ptr[0]=1; ptr[1]=2; ptr[2]=3;

    ptr = (int*) realloc(ptr, 5 * sizeof(int)); // ุชุบุฑ ุงูุฏุงุฒู
    ptr[3]=4; ptr[4]=5;

    for(int i=0;i<5;i++)
        printf("%d ", ptr[i]);

    free(ptr);
    return 0;
}
```

**ุฎุฑูุฌ:**

```
1 2 3 4 5
```

---

## ๐น 8. free (ุขุฒุงุฏุณุงุฒ ุญุงูุธู)

* ุญุงูุธู **ุงุฎุชุตุงุต ุฏุงุฏู ุดุฏู** ุฑุง ุขุฒุงุฏ ูโฺฉูุฏ ุชุง ุงุฒ **Memory Leak** ุฌููฺฏุฑ ุดูุฏ.
* ุจุนุฏ ุงุฒ `free`ุ ุงุดุงุฑูโฺฏุฑ **dangling** ูโุดูุฏ โ ุจูุชุฑ ุงุณุช ุขู ุฑุง `NULL` ฺฉูู.

```c
free(ptr);
ptr = NULL;
```

---

## ๐น 9. ุขุฑุงูโูุง ูพูุง ุจุง ุงุดุงุฑูโฺฏุฑูุง

### ุขุฑุงู 1 ุจุนุฏ:

```c
int *arr = (int*) malloc(n * sizeof(int));
for(int i=0;i<n;i++) arr[i] = i+1;
```

### ุขุฑุงู 2 ุจุนุฏ:

```c
int **arr = (int**) malloc(rows * sizeof(int*));
for(int i=0;i<rows;i++)
    arr[i] = (int*) malloc(cols * sizeof(int));
```

* ุจุฑุง ุขุฒุงุฏุณุงุฒ ุญุงูุธู:

```c
for(int i=0;i<rows;i++) free(arr[i]);
free(arr);
```

---

## ๐น 10. ูุฒุงุง ุงุณุชูุงุฏู ุงุฒ ุญุงูุธู ูพูุง

1. **ุงุณุชูุงุฏู ุงูุนุทุงูโูพุฐุฑ ุงุฒ ุญุงูุธู** โ ููุท ุจู ุงูุฏุงุฒู ูุงุฒ ุญุงูุธู ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏ.
2. **ูุงุจูุช ุชุบุฑ ุงูุฏุงุฒู ุฏุฑ ุฒูุงู ุงุฌุฑุง** โ ุจุง realloc ูโุชูุงู ุญุงูุธู ุฑุง ุชุบุฑ ุฏุงุฏ.
3. **ูพุดุชุจุงู ุงุฒ ุณุงุฎุชุงุฑูุง ุฏุงุฏู ูพูุง** โ Linked Listุ ุฏุฑุฎุชุ ฺฏุฑุงู.
4. **ฺฉุงุฑุขูุฏ ุจุฑุง ุขุฑุงูโูุง ู ุณุงุฎุชุงุฑูุง ุจุฒุฑฺฏ** โ ุฌููฺฏุฑ ุงุฒ Stack Overflow.
5. **ุงูฺฉุงู ุจุงุฒฺฏุฑุฏุงูุฏู ุญุงูุธู ุงุฒ ุชูุงุจุน** ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุดุงุฑูโฺฏุฑูุง.

---

## ๐น 11. ุงุดุชุจุงูุงุช ุฑุงุฌ ู ูฺฉุงุช ููู

1. **ุจุฑุฑุณ ูฺฉุฑุฏู NULL** ุจุนุฏ ุงุฒ malloc/calloc/realloc โ ุจุฑูุงูู crash ูโุดูุฏ.
2. **ุขุฒุงุฏ ูฺฉุฑุฏู ุญุงูุธู** โ Memory Leak.
3. **dangling pointer** โ ุงุณุชูุงุฏู ุงุฒ ุงุดุงุฑูโฺฏุฑ ุจุนุฏ ุงุฒ free.
4. **ุขุฑุชูุชฺฉ ุงุดุงุฑูโฺฏุฑ ูุงูุนุชุจุฑ** โ ุฑูุชุงุฑ ุบุฑูุงุจู ูพุดโุจู.
5. ููุดู malloc/calloc ุฑุง ุจุง free ููุฑุงู ฺฉูุฏ.
6. ุงุดุงุฑูโฺฏุฑูุง ุฑุง ุจุนุฏ ุงุฒ free ุจู **NULL** ููุฏุงุฑุฏู ฺฉูุฏ.

---

## ๐น 12. ุฌุฏูู ููุงุณู ุณุฑุน

| ุชุงุจุน    | ููุฏุงุฑุฏู ุงููู    | ุณูุชฺฉุณ                 | ุชูุถุญุงุช                                      |
| ------- | ----------------- | ---------------------- | -------------------------------------------- |
| malloc  | garbage           | malloc(size)           | ููุน void* ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏุ ูุงุฒ ุจู typecast |
| calloc  | ุตูุฑ               | calloc(n, size)        | ุจุฑุง n ุนูุตุฑ ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏ               |
| realloc | ุญูุธ ุฏุงุฏูโูุง ูุจู | realloc(ptr, new_size) | ุงูุฏุงุฒู ุญุงูุธู ุชุบุฑ ูโฺฉูุฏ                    |
| free    | -                 | free(ptr)              | ุญุงูุธู ุขุฒุงุฏ ูโุดูุฏ                            |

---

ูุฑูุงุฏุ ุจู ุฒุจุงู ุณุงุฏู:

> * **ุญุงูุธู ุงุณุชุงุชฺฉ** โ ุงูุฏุงุฒู ุซุงุจุชุ stackุ ุฒูุงู ฺฉุงููพุงู
> * **ุญุงูุธู ูพูุง** โ ุงูุนุทุงูโูพุฐุฑุ heapุ ุฒูุงู ุงุฌุฑุงุ ุจุง ุงุดุงุฑูโฺฏุฑ ูุฏุฑุช ูโุดูุฏ
> * **malloc/calloc** โ ุงุฎุชุตุงุต ุญุงูุธู
> * **realloc** โ ุชุบุฑ ุงูุฏุงุฒู ุญุงูุธู
> * **free** โ ุขุฒุงุฏุณุงุฒ ุญุงูุธู

---